import{u as y,r as d,s as j,j as s,L as v,d as x,e as h,l as q,M as u,y as z,m as P}from"./index-COtnN8fA.js";import{S as C}from"./SelectInput-BZT1NRJ5.js";import{P as T}from"./PaymentMethods-DGDzfuyP.js";import{S as O}from"./Stepper-CaLPJ7-L.js";const $="_wrapper_sx784_1",w="_container_sx784_11",U={wrapper:$,container:w,"left-content":"_left-content_sx784_20","right-content":"_right-content_sx784_23"},E="_overlay_1du5s_63",R="_loading_1du5s_73",L="_details_1du5s_86",A="_name_1du5s_105",D="_size_1du5s_111",F="_detail_1du5s_86",g={"product-table":"_product-table_1du5s_1","coupon-section":"_coupon-section_1du5s_15","coupon-input":"_coupon-input_1du5s_22","clear-btn":"_clear-btn_1du5s_45",overlay:E,loading:R,details:L,"product-info":"_product-info_1du5s_93",name:A,size:D,"size-value":"_size-value_1du5s_116","remove-btn":"_remove-btn_1du5s_120","mobile-detail":"_mobile-detail_1du5s_136","quantity-box":"_quantity-box_1du5s_140","quantity-input":"_quantity-input_1du5s_145","subtotal-price":"_subtotal-price_1du5s_149",detail:F,"desktop-detail":"_desktop-detail_1du5s_181"},e=x.bind(g);function M({item:t}){const n=y(),[l,r]=d.useState(!1),[f,m]=d.useState(!1),{deleteCartProduct:k,handleGetListProductsCart:I}=d.useContext(j),b=[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"}],_=a=>{n(h.routes.product+`/${a}`)},S=a=>{m(!0);try{k(a,u)}catch{m(!1)}},N=a=>{r(!0),q(a).then(c=>{I(u,"cart"),r(!1)}).catch(c=>{z.error("Something went wrong, can not update product, try again later")})};return s.jsxs("tr",{children:[f&&s.jsx("td",{className:e("overlay"),children:s.jsx(v,{className:e("loading")})}),s.jsxs("td",{className:e("product-info"),children:[s.jsx("img",{src:t.images[0],alt:t.name,onClick:()=>_(t.productId),style:{cursor:"pointer"}}),s.jsxs("div",{className:e("details"),children:[s.jsxs("div",{className:e("mobile-detail"),children:[s.jsxs("div",{className:e("detail"),children:[s.jsx("p",{className:e("name"),onClick:()=>_(t.productId),children:t.name}),s.jsxs("p",{className:e("size"),children:["Size:",s.jsx("span",{className:e("size-value"),children:t.size})]}),s.jsxs("div",{children:["Price: $",t.price.toFixed(2)]}),s.jsxs("div",{children:["SKU: ",t.sku]}),s.jsxs("div",{className:e("quantity-box"),children:["Quantity:",s.jsx(C,{small:!0,defaultValue:t.quantity,className:e("quantity-input"),getValue:a=>{const c={userId:u,productId:t.productId,quantity:Number(a-t.quantity),size:t.size,isMultiple:!1};N(c)},options:b})]})]}),s.jsxs("div",{className:e("subtotal-price"),children:["$",(t.price*t.quantity).toFixed(2)]})]}),s.jsx("p",{className:e("name","desktop-detail"),onClick:()=>_(t.productId),children:t.name}),s.jsxs("p",{className:e("size","desktop-detail"),children:["Size: ",s.jsx("span",{className:e("size-value"),children:t.size})]})]}),s.jsx("button",{onClick:()=>S(t.productId),className:e("remove-btn"),children:"Ã—"})]}),s.jsxs("td",{className:e("desktop-detail"),children:["$",t.price.toFixed(2)]}),s.jsx("td",{className:e("desktop-detail"),children:t.sku}),s.jsx("td",{className:e("desktop-detail"),children:s.jsx("div",{className:e("quantity-box"),children:l?s.jsx(v,{}):s.jsx(C,{defaultValue:t.quantity,className:e("quantity-input"),getValue:a=>{const c={userId:u,productId:t.productId,quantity:Number(a-t.quantity),size:t.size,isMultiple:!1};N(c)},options:b})})}),s.jsxs("td",{className:e("subtotal-price","desktop-detail"),children:["$",(t.price*t.quantity).toFixed(2)]})]})}const o=x.bind(g);function K({items:t}){const{handleDeleteCart:n}=d.useContext(j);return s.jsxs("div",{className:o("left-content"),children:[s.jsxs("table",{className:o("product-table"),children:[s.jsx("thead",{className:o("desktop-detail"),children:s.jsxs("tr",{children:[s.jsx("th",{children:"PRODUCT"}),s.jsx("th",{children:"PRICE"}),s.jsx("th",{children:"SKU"}),s.jsx("th",{children:"QUANTITY"}),s.jsx("th",{children:"SUBTOTAL"})]})}),s.jsx("tbody",{children:t.map(l=>s.jsx(M,{item:l},l.productId))})]}),s.jsxs("div",{className:o("coupon-section"),children:[s.jsxs("div",{className:o("coupon-input"),children:[s.jsx("input",{type:"text",placeholder:"Coupon code"}),s.jsx("button",{children:"OK"})]}),s.jsx("button",{onClick:n,className:o("clear-btn"),children:"CLEAR CART"})]})]})}const V={"cart-totals":"_cart-totals_11i43_1","total-row":"_total-row_11i43_12","grand-total":"_grand-total_11i43_19","checkout-btn":"_checkout-btn_11i43_28","continue-btn":"_continue-btn_11i43_45"},i=x.bind(V);function B({subtotal:t}){const n=y();return s.jsx(s.Fragment,{children:s.jsxs("div",{className:i("cart-totals"),children:[s.jsx("h3",{children:"CART TOTALS"}),s.jsxs("div",{className:i("total-row"),children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{children:["$",t.toFixed(2)]})]}),s.jsxs("div",{className:i("total-row","grand-total"),children:[s.jsx("span",{children:"TOTAL"}),s.jsxs("span",{children:["$",t.toFixed(2)]})]}),s.jsx("button",{className:i("checkout-btn"),onClick:()=>n(h.routes.checkout),children:"PROCEED TO CHECKOUT"}),s.jsx("button",{className:i("continue-btn"),onClick:()=>n(h.routes.shop),children:"CONTINUE SHOPPING"}),s.jsx(T,{})]})})}const p=x.bind(U);function J(){const{listProductCart:t}=d.useContext(j),n=d.useMemo(()=>(t||[]).reduce((l,r)=>l+(r.total||0),0),[t]);return s.jsxs("div",{className:p("wrapper"),children:[s.jsx(O,{currentStep:1}),t&&t.length>0?s.jsxs("div",{className:p("container"),children:[s.jsx("div",{className:p("left-content"),children:s.jsx(K,{items:t})}),s.jsx("div",{className:p("right-content"),children:s.jsx(B,{subtotal:n})})]}):s.jsx(P,{hasReturn:!0})]})}export{J as default};
