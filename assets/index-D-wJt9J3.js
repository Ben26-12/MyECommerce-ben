import{j as e,d as v,r as p,s as g,u as P,B as j,M as S,e as N,n as w,y as b}from"./index-COtnN8fA.js";import{I as r,c as F,a as n,u as C}from"./index.esm-CSHFlror.js";import{S as q}from"./SelectInput-BZT1NRJ5.js";import{P as I}from"./PaymentMethods-DGDzfuyP.js";import{S as O}from"./Stepper-CaLPJ7-L.js";const f="_wrapper_udakn_9",$="_link_udakn_21",R="_container_udakn_26",M={"page-wrapper":"_page-wrapper_udakn_1","stepper-container":"_stepper-container_udakn_5",wrapper:f,"coupon-section":"_coupon-section_udakn_17",link:$,container:R,"left-section":"_left-section_udakn_31","right-section":"_right-section_udakn_36"},A="_title_1nubi_1",D="_row_1nubi_9",E="_label_1nubi_17",L={title:A,row:D,label:E,"input-group":"_input-group_1nubi_23","country-input":"_country-input_1nubi_27","note-input":"_note-input_1nubi_32"},T=[{value:"UK",label:"United Kingdom (UK)"},{value:"VN",label:"Vietnam (VN)"},{value:"US",label:"United States (US)"}],U=[{id:"check",title:"Check payments",desc:"Please send a check to Store Name, Store Street, Store Town, Store State / County, Store Postcode."},{id:"cod",title:"Cash on delivery",desc:"Pay with cash when the order arrives."}],l=v.bind(L);function V({formik:t}){return e.jsxs("div",{className:l("billing-details"),children:[e.jsx("h3",{className:l("title"),children:"BILLING DETAILS"}),e.jsxs("form",{children:[e.jsxs("div",{className:l("row"),children:[e.jsx(r,{label:"First Name",required:!0,name:"firstName",placeholder:"First Name",...t.getFieldProps("firstName"),error:t.errors.firstName,touched:t.touched.firstName}),e.jsx(r,{label:"Last Name",required:!0,name:"lastName",placeholder:"Last Name",...t.getFieldProps("lastName"),error:t.errors.lastName,touched:t.touched.lastName})]}),e.jsx(r,{label:"Company Name (optional)",name:"companyName",placeholder:"Company Name",...t.getFieldProps("companyName")}),e.jsxs("div",{className:l("input-group"),children:[e.jsx("label",{className:l("label"),children:"Country / Region *"}),e.jsx(q,{className:l("country-input"),options:T,defaultValue:t.values.country,getValue:i=>t.setFieldValue("country",i)})]}),e.jsx(r,{label:"Street address",required:!0,name:"address1",placeholder:"House number and street name",...t.getFieldProps("address1"),error:t.errors.address1,touched:t.touched.address1}),e.jsx(r,{name:"address2",...t.getFieldProps("address2"),placeholder:"Apartment, suite, unit, etc. (optional)"}),e.jsx(r,{label:"Town / City",required:!0,name:"city",...t.getFieldProps("city"),error:t.errors.city,touched:t.touched.city}),e.jsx(r,{label:"County (optional)",name:"county",...t.getFieldProps("county"),error:t.errors.county,touched:t.touched.county}),e.jsx(r,{label:"Phone",required:!0,name:"phone",placeholder:"Phone",...t.getFieldProps("phone"),error:t.errors.phone,touched:t.touched.phone}),e.jsx(r,{label:"Postcode",required:!0,name:"postcode",...t.getFieldProps("postcode"),error:t.errors.postcode,touched:t.touched.postcode}),e.jsx(r,{label:"Email Address",required:!0,name:"email",type:"email",placeholder:"Email Address",...t.getFieldProps("email"),error:t.errors.email,touched:t.touched.email}),e.jsx("h3",{className:l("title"),children:"ADDITIONAL INFORMATION"}),e.jsx(r,{label:"Order Notes (optional)",type:"textarea",name:"notes",className:l("note-input"),placeholder:"Notes about your order, e.g. special notes for delivery.",...t.getFieldProps("notes")})]})]})}const B="_title_1svu0_6",K="_total_1svu0_65",Y="_active_1svu0_97",z={"summary-box":"_summary-box_1svu0_1",title:B,"product-item":"_product-item_1svu0_11","product-info":"_product-info_1svu0_19","product-img":"_product-img_1svu0_24","product-name":"_product-name_1svu0_30","product-meta":"_product-meta_1svu0_36","product-price":"_product-price_1svu0_44","remove-btn":"_remove-btn_1svu0_48","summary-row":"_summary-row_1svu0_58",total:K,"total-price":"_total-price_1svu0_70","payment-methods":"_payment-methods_1svu0_74","payment-option":"_payment-option_1svu0_80","payment-desc":"_payment-desc_1svu0_88",active:Y,"place-order-btn":"_place-order-btn_1svu0_101","secure-text":"_secure-text_1svu0_117"},s=v.bind(z);function H({formik:t,total:i,displayProducts:d}){const{deleteCartProduct:o}=p.useContext(g),m=P(),u=a=>{m(N.routes.product+`/${a}`)};return e.jsx("div",{className:s("order-summary"),children:e.jsxs("div",{className:s("summary-box"),children:[e.jsx("h3",{className:s("title"),children:"YOUR ORDER"}),d.map((a,_)=>e.jsxs("div",{className:s("product-item"),children:[e.jsxs("div",{className:s("product-info"),children:[e.jsx("img",{onClick:()=>u(a.productId),src:a.images[0],alt:"product",className:s("product-img")}),e.jsxs("div",{className:s("product-stats"),children:[e.jsx("p",{onClick:()=>u(a.productId),className:s("product-name"),children:a.name}),e.jsxs("div",{className:s("product-meta"),children:[e.jsx("div",{className:s("quantity"),children:a.quantity}),e.jsxs("div",{className:s("product-price"),children:["Ã— $",a.price]})]}),e.jsxs("p",{className:s("product-meta"),children:["Size: ",a.size]}),e.jsx(j,{onClick:()=>o(a.productId,S),className:s("remove-btn"),children:"Remove"})]})]}),e.jsxs("div",{className:s("product-total"),children:["$",a.total.toFixed(2)]})]},_)),e.jsxs("div",{className:s("summary-row"),children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",i]})]}),e.jsxs("div",{className:s("summary-row","total"),children:[e.jsx("span",{children:"TOTAL"}),e.jsxs("span",{className:s("total-price"),children:["$",i]})]}),e.jsx("div",{className:s("payment-methods"),children:U.map(a=>e.jsxs("div",{className:s("payment-option"),children:[e.jsx("input",{className:t.values.paymentMethod===a.id?s("active"):"",checked:t.values.paymentMethod===a.id,type:"radio",id:a.id,name:"payment",onChange:()=>t.setFieldValue("paymentMethod",a.id)}),e.jsx("label",{htmlFor:a.id,children:a.title}),e.jsx("p",{className:s("payment-desc"),children:a.desc})]},a.id))}),e.jsx(j,{onClick:t.handleSubmit,large:!0,className:s("place-order-btn"),children:"PLACE ORDER"}),e.jsx(I,{}),e.jsx("p",{className:s("secure-text"),children:"Your Payment is 100% Secure"})]})})}const c=v.bind(M);function Z(){const{listProductCart:t,isLoading:i}=p.useContext(g),d=w(),o=p.useMemo(()=>d.state&&d.state.length>0?d.state:t,[t,d.state]);p.useEffect(()=>{!i&&o.length===0&&(b.warn("Your cart is empty. Redirecting to shop..."),m(N.routes.shop))},[o.length,i]);const m=P(),u=p.useMemo(()=>o.reduce((x,h)=>x+Number(h.total)||0,0).toFixed(2),[o]),a={firstName:"",lastName:"",companyName:"",country:"UK",address1:"",apartment:"",city:"",county:"",phone:"",postcode:"",email:"",notes:"",paymentMethod:"check"},_=F({firstName:n().required("Please fill out this field."),lastName:n().required("Please fill out this field."),country:n().required("Please select a country."),address1:n().required("Please fill out this field."),city:n().required("Please fill out this field."),phone:n().matches(/^[0-9]+$/,"Must be only digits").min(10,"Phone number is too short").required("Please fill out this field."),postcode:n().required("Please fill out this field."),email:n().email("Invalid email address").required("Please fill out this field.")}),y=C({initialValues:a,validationSchema:_,validateOnBlur:!0,validateOnChange:!1,onSubmit:x=>{const h={...x,products:o,totalAmount:u,orderDate:new Date().toISOString()};console.log("Order Data:",h),b.success("Order is successfully placed",{autoClose:2e3,onClose:()=>m(N.routes.thankyou,{state:h})})}});return e.jsxs("div",{className:c("page-wrapper"),children:[e.jsx("div",{className:c("stepper-container"),children:e.jsx(O,{currentStep:2})}),e.jsxs("div",{className:c("wrapper"),children:[e.jsxs("div",{className:c("coupon-section"),children:["Have a coupon? ",e.jsx("span",{className:c("link"),children:"Click here to enter"})]}),e.jsxs("div",{className:c("container"),children:[e.jsx("div",{className:c("left-section"),children:e.jsx(V,{formik:y})}),e.jsx("div",{className:c("right-section"),children:e.jsx(H,{displayProducts:o,total:u,formik:y})})]})]})]})}export{Z as default};
